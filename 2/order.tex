\lsection{順序}

\lsubsection{半順序}

\dfn{半順序}{
  反対称的な前順序を、半順序と呼ぶ。

  集合$P$上の半順序$\preccurlyeq$について、順序対$\qty(P, \preccurlyeq)$を半順序集合と呼ぶ。
  または単に$P$と書き、半順序集合と集合どちらも表すものとする。
}

\cor*{
  集合$P$について、$\qty(P, \subset)$は半順序集合である。また、$\qty(P, \supset)$も半順序集合である。
}

\dfn{単調}{
  半順序と両立する写像を単調である、または広義単調であると呼ぶ。
}

\dfn{極大元}{
  半順序集合$P$について、以下の元$b$を$P$の極大元と呼ぶ。
  \eq*{
    b \in P \land \forall a \in P \qty(\lnot b \prec a)
  }
}

\dfn{最大元}{
  半順序集合$P$について、以下の元$b$を$P$の最大元と呼ぶ。
  \eq*{
    b \in P \land \forall a \in P \qty(a \preccurlyeq b)
  }
}

\dfn{極小元}{
  半順序集合$P$について、以下の元$b$を$P$の極小元と呼ぶ。
  \eq*{
    b \in P \land \forall a \in P \qty(\lnot b \succ a)
  }
}

\dfn{最小元}{
  半順序集合$P$について、以下の元$b$を$P$の最小元と呼ぶ。
  \eq*{
    b \in P \land \forall a \in P \qty(a \succcurlyeq b)
  }
}

\cor*{
  半順序集合$P$の最大元は、極大元である。
}

\cor{最大元の一意性}{
  半順序集合$P$の最大元は存在するならば一意である。
  これは半順序の反対称性から従う。

  ここから、半順序集合$P$の最大元$b$を$\max P \coloneqq b$と表す。
}

\cor*{
  半順序集合$P$の最小元は、極小元である。
}

\cor{最小元の一意性}{
  半順序集合$P$の最小元は存在するならば一意である。
  これは半順序の反対称性から従う。

  ここから、半順序集合$P$の最小元$b$を$\min P \coloneqq b$と表す。
}

\dfn{上限}{
  半順序集合$P$について、その部分集合$A$を考える。

  \thmref{分出の公理図式}より定まる、$A$の上界全体の集合について、最小元が存在するとき、これを$A$の上限と呼び、$\sup A$で表す。
}

\dfn{下限}{
  半順序集合$P$について、その部分集合$A$を考える。

  \thmref{分出の公理図式}より定まる、$A$の下界全体の集合について、最大元が存在するとき、これを$A$の下限と呼び、$\inf A$で表す。
}


\lsubsection{束}

\dfn{束}{
  以下を満たす半順序集合$P$を束と呼ぶ。
  \eq*{
    \forall x, y \in P \exists z, w \in P \qty(z = \sup{x, y} \land w = \inf{x, y})
  }
}

\cor*{
  束は有向集合である。
}

\dfn{全順序}{
  集合$P$上の以下を満たす半順序$\preccurlyeq$を全順序と呼ぶ。
  全順序であることを明示的に記号$\leq$で表す。
  \eq*{
    \forall x, y \in P \qty(x \preccurlyeq y \lor y \preccurlyeq x)
  }

  集合$P$上の全順序$\leq$について、順序対$\qty(P, \leq)$を全順序集合と呼ぶ。
  または単に$P$と書き、全順序集合と集合どちらも表すものとする。

  略記$<, \geq, >$を以下のように定める。
  \eqg*{
    x < y \defiff x \leq y \land x \neq y \\*
    x \geq y \defiff y \leq x \\*
    x > y \defiff y < x
  }
}

\cor*{
  全順序集合$P$の極大元は最大元であり、極小元は最小元である。
}

\cor*{
  全順序集合は束である。
}

\dfn{区間}{
  全順序集合$P$と$a, b \in P$について、以下で定める$P$の部分集合をそれぞれ、開区間$\sqty{a, b}$、閉区間$\qty[a, b]$と呼ぶ。
  \eqg*{
    \sqty{a, b} \coloneqq \qty{x \in P \mid a < x \land x < b} \\*
    \qty[a, b] \coloneqq \qty{x \in P \mid a \leq x \land x \leq b}
  }

  開区間、閉区間をまとめて区間と呼ぶ。
}


\lsubsection{Zornの補題}

\dfn{帰納的}{
  空でない半順序集合$\qty(P, \preccurlyeq)$を考える。

  $P$の任意の部分集合$A$について、順序対$\qty(A, \preccurlyeq)$が全順序集合ならば$A$が上に有界となるとき、$P$は帰納的であると言う。
}

\lem*{
  帰納的な半順序集合$\qty(P, \preccurlyeq)$について、以下の集合系$\mathcal{M}$、すなわち$P$の全順序部分集合の全体を考える。
  \eq*{
    \mathcal{M} \coloneqq \qty{M \subset P \mid \forall x, y \in M \qty(x \preccurlyeq y \lor y \preccurlyeq x)}
  }

  このとき、$P$が極大元を持たないならば、以下を満たす写像$f \colon \mathcal{M} \to P$が存在する。
  \eq*{
    \forall M \in \mathcal{M} \forall m \in M \qty(m \prec f(M))
  }
}{
  帰納的であることより、$\forall M \in \mathcal{M}$に対して上界$u$が存在する。

  今、$u$は$P$の極大元ではないので、$\exists v \in P \qty(u \prec v)$である。
  $\forall m \in M \qty(m \preccurlyeq u \prec v)$である。

  \thmref{選択公理が与える写像}より存在する。
}

\dfn{タワー}{
  極大元を持たない半順序集合$P$を考える。

  \mlemref{0}で定めた集合系$\mathcal{M}$と写像$f$を考える。

  以下を満たす集合系$\mathcal{T} \subset \mathcal{M}$を、$P$のタワーと呼ぶ。
  \eqg*{
    \varnothing \in \mathcal{T} \\*
    \forall T \in \mathcal{T} \qty(T \cup \qty{f(T)} \in \mathcal{T}) \\*
    \forall \mathcal{S} \subset \mathcal{T} \qty(\text{$\qty(\mathcal{S}, \subset)$は全順序集合} \rightarrow \bigcup \mathcal{S} \in \mathcal{T})
  }
}

\lem*{
  極大元を持たない半順序集合$P$について、以下の集合を考える。
  \eq*{
    \mathcal{T}_0 \coloneqq \bigcap \qty{\mathcal{T} \subset \P(P) \mid \text{$\mathcal{T}$は$P$のタワー}}
  }

  このとき、$\mathcal{T}_0$は$P$のタワーである。
}{
  $\mathcal{M}$は$P$のタワーであるので、$\qty{\mathcal{T} \subset \P(P) \mid \text{$\mathcal{T}$は$P$のタワー}} \neq \varnothing$である。

  タワーの定義より、明らか。
}

\lem*{
  極大元を持たない半順序集合$P$を考える。

  \mlemref{-2}で定めた$f$について、以下で定める写像$g \colon \mathcal{M} \to \mathcal{M}$を考える。
  \eq*{
    g(M) \coloneqq M \cup \qty{f(M)}
  }

  このとき、\mlemref{-1}で定めた$\mathcal{T}_0$は、以下を満たす。
  \eq*{
    \forall T \in \mathcal{T}_0 \qty(\forall T' \in \mathcal{T}_0 \qty(T \subset T' \lor T' \subset T) \rightarrow \forall T' \in \mathcal{T}_0 \qty(T' \subset T \lor g(T) \subset T'))
  }
}{
  前件を満たす$T$について、以下の集合系を考える。
  \eq*{
    \mathcal{T}_T \coloneqq \qty{T' \in \mathcal{T}_0 \mid T' \subset T \lor g(T) \subset T'}
  }

  定義より、$\mathcal{T}_T \subset \mathcal{T}_0$である。

  \vskip\baselineskip

  今、$\varnothing \subset T$であるので、$\varnothing \in \mathcal{T}_T$である。

  \vskip\baselineskip

  $T' \in \mathcal{T}_T$を考える。

  $g(T) \subset T'$であるとき、$g(T) \subset T' \subset g(T')$より、$g(T') \in \mathcal{T}_T$である。

  $T' \subset T$であるとき、$g(T') \subset T$ならば$g(T') \in \mathcal{T}_T$である。

  $g(T') \setminus T \neq \varnothing$ならば、$g(T') \setminus T = \qty{f(T')}$であるため、$T = T'$である。
  ゆえに、$g(T') = g(T) \in \mathcal{T}_T$である。

  \vskip\baselineskip

  $\mathcal{T}_T$の全順序部分$\mathcal{S}$を考える。

  $\mathcal{S} \subset \mathcal{T}_T \subset \mathcal{T}_0$より、タワーの定義から$\bigcup \mathcal{S} \in \mathcal{T}_0$である。

  $\forall S \in \mathcal{S} \qty(S \subset T)$ならば、$\bigcup \mathcal{S} \subset T$であり、$\bigcup \mathcal{S} \in \mathcal{T}_T$である。

  $\exists S \in \mathcal{S} \qty(g(T) \subset S)$ならば、$g(T) \subset \bigcup \mathcal{S}$であり、$\bigcup \mathcal{S} \in \mathcal{T}_T$である。

  \vskip\baselineskip

  ゆえに$\mathcal{T}_T$は、$P$のタワーである。

  よって、$\mathcal{T}_0 \subset \mathcal{T}_T$が成り立つので、$\mathcal{T}_0 = \mathcal{T}_T$である。

  したがって後件を満たす。
}

\lem*{
  極大元を持たない半順序集合$P$を考える。

  \mlemref{-2}で定めた$\mathcal{T}_0$について、$\qty(\mathcal{T}_0, \subset)$は全順序集合である。
}{
  以下の集合系を考える。
  \eq*{
    \mathcal{T}_1 \coloneqq \qty{T \in \mathcal{T}_0 \mid \forall T' \in \mathcal{T}_0 \qty(T \subset T' \lor T' \subset T)}
  }

  定義より、$\mathcal{T}_1 \subset \mathcal{T}_0$である。

  \vskip\baselineskip

  今、$\varnothing \subset T$であるので、$\varnothing \in \mathcal{T}_1$である。

  \vskip\baselineskip

  $T \in \mathcal{T}_1$を考える。

  \mlemref{-1}より、$\forall T' \in \mathcal{T}_0 \qty(T' \subset T \subset g(T) \lor g(T) \subset T')$であるため、$g(T) \in \mathcal{T}_1$である。

  \vskip\baselineskip

  $\mathcal{T}_1$の全順序部分$\mathcal{S}$を考える。

  $\mathcal{S} \subset \mathcal{T}_1 \subset \mathcal{T}_0$より、タワーの定義から$\bigcup \mathcal{S} \in \mathcal{T}_0$である。

  $\forall T' \in \mathcal{T}_0$を考える。

  $\forall S \in \mathcal{S} \qty(S \subset T')$ならば、$\bigcup \mathcal{S} \subset T'$である。
  $\exists S \in \mathcal{S} \qty(T' \subset S)$ならば、$T' \subset \bigcup \mathcal{S}$である。

  ゆえに、$T' \subset \bigcup \mathcal{S} \lor \bigcup \mathcal{S} \subset T'$である。

  したがって、$\bigcup \mathcal{S} \in \mathcal{T}_1$である。

  \vskip\baselineskip

  ゆえに$\mathcal{T}_1$は、$P$のタワーである。

  よって、$\mathcal{T}_0 \subset \mathcal{T}_1$が成り立つので、$\mathcal{T}_0 = \mathcal{T}_1$である。
}

\thm{Zornの補題}{
  帰納的な半順序集合には極大元が存在する。
}{
  極大元を持たないと仮定する。

  \mlemref{-1}より$\qty(\mathcal{T}_0, \subset)$は全順序であるため、タワーの定義から$\bigcup \mathcal{T}_0 \in \mathcal{T}_0$である。

  タワーの定義より$g(\bigcup \mathcal{T}_0) \in \mathcal{T}_0$であるので、から$f(\bigcup \mathcal{T}_0) \in \bigcup \mathcal{T}_0$である。

  これは、\mlemref{-3}における$f$の定義に反する。

  背理法より示される。
}


\lsubsection{フィルターとネット}

\dfn{フィルター}{
  半順序集合$\qty(P, \preccurlyeq)$と$P$の空でない部分集合$F$について、以下を満たすとき$F$を$P$のフィルターと呼ぶ。
  \eqg*{
    \forall x, y \in F \exists z \in F \qty(z \preccurlyeq x \land z \preccurlyeq y) \\*
    \forall x \in F \forall y \in P \qty(x \preccurlyeq y \rightarrow y \in F)
  }
}

\cor*{
  フィルターは逆順序について有向集合である。
}

\dfn{細分}{
  半順序集合$P$上のフィルター$F, G$に対して、$F \subset G$であるとき、$G$は$F$の細分であると呼ぶ。
}

\dfn{超フィルター}{
  自身以外の細分を持たないフィルターを超フィルターと呼ぶ。
}

\thm{超フィルターの存在}{
  任意のフィルターに対して、その細分である超フィルターが存在する。
}{
  フィルター$F$に対して、その細分の全体$\mathcal{F}$を考える。
  半順序集合$\qty(\mathcal{F}, \subset)$を考える。

  $\mathcal{F}$の全順序部分集合$A$に対して、$\bigcup A \in \mathcal{F}$である。

  ゆえに、$\mathcal{F}$は帰納的である。

  \thmref{Zornの補題}より極大元が存在する。これは超フィルターである。
}

\dfn{集合におけるフィルター}{
  集合$X$について、半順序集合$\qty(\P(X) \setminus \qty{\varnothing}, \subset)$のフィルターを、集合$X$のフィルターと呼ぶ。
}

\cor*{
  集合$X$のフィルター$\mathcal{F}$は以下を満たす。
  \eqg*{
    X \in \mathcal{F} \\*
    \forall F_1, F_2 \in \mathcal{F} \qty(F_1 \cap F_2 \in \mathcal{F})
  }
}

\thm{集合の超フィルター}{
  集合$X$のフィルター$\mathcal{F}$について、以下の２つは同値である。
  \begin{enumerate}
    \item $\mathcal{F}$は超フィルターである
    \item $\forall A \in \P(X) \qty(A \in \mathcal{F} \lor X \setminus A \in \mathcal{F})$
  \end{enumerate}
}{
  $1. \rightarrow 2.$を示す。

  $A \in \mathcal{F}$のとき明らかであるので、$A \notin \mathcal{F}$のときを考える。

  $\mathcal{S} \coloneqq \qty{S \in \P(X) \mid A \cup S \in \mathcal{F}}$について、定義より$\mathcal{F} \subset \mathcal{S} \land X \setminus A \in \mathcal{S}$である。

  今、$\forall S_1, S_2 \in \mathcal{S}$について、$A \cup \qty(S_1 \cap S_2) = \qty(A \cup S_1) \cap \qty(A \cup S_2) \in \mathcal{F}$より、$S_1 \cap S_2 \in \mathcal{S}$である。

  $S \in \mathcal{S} \land T \in \P(X) \land S \subset T$とすると、$A \cup S \in \mathcal{F} \rightarrow A \cup T \in \mathcal{F}$より$T \in \mathcal{S}$

  $A \cup X = X \in \mathcal{F}$より、$X \in \mathcal{S}$である。すなわち、$\mathcal{S} \neq \varnothing$

  $\varnothing \notin \mathcal{S}$より、$\mathcal{S}$はフィルターでありかつ$\mathcal{F}$の細分である。

  ここで、$\mathcal{F}$は超フィルターであるので$X \setminus A \in \mathcal{S} = \mathcal{F}$

  \vskip\baselineskip

  $2. \rightarrow 1.$を示す。

  超フィルターでないとすると、$\mathcal{F}$の細分$\mathcal{F'}$が存在して、$\exists A \in \mathcal{F'} \qty(A \notin \mathcal{F} \land A \in \mathcal{F'})$である。

  仮定より、$X \setminus A \in \mathcal{F} \subset \mathcal{F'}$であり、$\varnothing = A \cap \qty(X \setminus A) \in \mathcal{F'}$よりフィルターの定義に矛盾。背理法より示される。
}

\dfn{ネット}{
  有向集合$\Lambda$から集合$X$への写像を、$X$上のネットと呼ぶ。

  ネットは、明示的に$\qty(x_\lambda)_{\lambda \in \Lambda}$と表す。このとき、$x_\lambda$は$X$上の元で、$\lambda \in \Lambda$での値を表す。

  また誤解のない限り、$\qty(x_\lambda)_{\lambda \in \Lambda}$で値域を表す。
}

\dfn{部分ネット}{
  集合$X$上のネット$\qty(x_\lambda)_{\lambda \in \Lambda}$と有向集合$M$について、写像$\varphi \in \Lambda^M$が以下を満たすとき、$\qty(x_{\varphi(\mu)})_{\mu \in M}$を$\qty(x_\lambda)_{\lambda \in \Lambda}$の部分ネットと呼ぶ。
  \eqg*{
    \forall \mu_1, \mu_2 \in M \qty(\mu_1 \preccurlyeq \mu_2 \rightarrow \varphi(\mu_1) \preccurlyeq \varphi(\mu_2)) \\*
    \forall \lambda \in \Lambda \exists \mu \in M \qty(\lambda \preccurlyeq \varphi(\mu))
  }
}

\dfn{普遍}{
  集合$X$上のネット$\qty(x_\lambda)_{\lambda \in \Lambda}$が以下を満たすとき、$\qty(x_\lambda)_{\lambda \in \Lambda}$は普遍であると呼ぶ。
  \eq*{
    \forall A \in \P(X) \exists \lambda_0 \in \Lambda \qty(\qty(x_\lambda)_{\lambda \in \Lambda_{\succcurlyeq \lambda_0}} \subset A \lor \qty(x_\lambda)_{\lambda \in \Lambda_{\succcurlyeq \lambda_0}} \subset X \setminus A)
  }
}

\thm{ネットの定めるフィルター}{
  集合$X$上のネット$\qty(x_\lambda)_{\lambda \in \Lambda}$について、以下で定める集合系$\mathcal{F}$は$X$のフィルターである。
  \eq*{
    \mathcal{F} \coloneqq \qty{F \in \P(X) \mid \exists \lambda_0 \in \Lambda \qty(\qty(x_\lambda)_{\lambda \in \Lambda_{\succcurlyeq \lambda_0}} \subset F)}
  }
}{
  明らかに$\varnothing \notin \mathcal{F} \land X \in \mathcal{F}$である。

  \vskip\baselineskip

  $F_1, F_2 \in \mathcal{F}$について、定義より$\exists \lambda_1, \lambda_2 \subset \Lambda \qty(\qty(x_\lambda)_{\lambda \in \Lambda_{\succcurlyeq \lambda_1}} \subset F_1 \land \qty(x_\lambda)_{\lambda \in \Lambda_{\succcurlyeq \lambda_2}} \subset F_2)$である。

  $\Lambda$が有向集合であることから、$\exists \lambda_3 \in \Lambda \qty(\lambda_1 \preccurlyeq \lambda_3 \land \lambda_2 \preccurlyeq \lambda_3)$であり、$\qty(x_\lambda)_{\lambda \in \Lambda_{\succcurlyeq \lambda_3}} \subset F_1 \cap F_2$。

  ゆえに$F_1 \cap F_2 \in \mathcal{F}$である。\\*

  $\forall F \in \mathcal{F} \forall G \subset \P(X)$について、$F \subset G$ならば定義より明らかに$G \in \mathcal{F}$
}

\lem*{
  集合$X$上のネット$\qty(x_\lambda)_{\lambda \in \Lambda}$と\thmref{ネットの定めるフィルター}の定めるフィルター$\mathcal{F}$を考える。

  このとき、$\mathcal{F}$の任意の細分$\mathcal{F'}$について、以下が成り立つ。
  \eq*{
    \forall F \in \mathcal{F'} \forall \lambda_0 \in \Lambda \exists \lambda \in \Lambda \qty(\lambda_0 \preccurlyeq \lambda \land x_\lambda \in F)
  }
}{
  $\exists F \in \mathcal{F'} \exists \lambda_0 \in \Lambda \forall \lambda \in \Lambda \qty(\lambda_0 \preccurlyeq \lambda \rightarrow x_\lambda \notin F)$とする。

  今、$\qty(x_\lambda)_{\lambda \in \Lambda_{\succcurlyeq \lambda_0}} \in \mathcal{F} \subset \mathcal{F'}$であるので、$\varnothing = F \cap \qty(x_\lambda)_{\lambda \in \Lambda_{\succcurlyeq \lambda_0}} \in \mathcal{F'}$より、フィルターの定義に矛盾。

  背理法より示される。
}

\thm{フィルターの定める部分ネット}{
  集合$X$上のネット$\qty(x_\lambda)_{\lambda \in \Lambda}$と、\thmref{ネットの定めるフィルター}の定めるフィルター$\mathcal{F}$について考える。

  $\mathcal{F}$の任意の細分$\mathcal{F'}$に対して、ある部分ネット$\qty(x_{\varphi(\mu)})_{\mu \in M}$が存在して、その部分ネットの\thmref{ネットの定めるフィルター}から定まるフィルターは$\mathcal{F'}$の細分となる。
}{
  $M \coloneqq \qty{\qty(\lambda, F) \in \Lambda \times \mathcal{F'} \mid x_\lambda \in F}$を考える。

  $M$上の前順序$\forall \qty(\lambda_1, F_1), \qty(\lambda_2, F_2) \in M \qty(\qty(\lambda_1, F_1) \preccurlyeq \qty(\lambda_2, F_2) \defiff \lambda_1 \preccurlyeq \lambda_2 \land F_1 \supset F_2)$を考える。

  \vskip\baselineskip

  $\qty(\lambda_1, F_1), \qty(\lambda_2, F_2) \in M$とする。

  $\mathcal{F'}$はフィルターより$F_1 \cap F_2 \in \mathcal{F'}$

  $\Lambda$は有向集合であるので、$\exists \lambda_3 \in \Lambda \qty(\lambda_1 \preccurlyeq \lambda_3 \land \lambda_2 \preccurlyeq \lambda_3)$である。

  \mlemref{-1}より$\exists \lambda_4 \in \Lambda \qty(\lambda_3 \preccurlyeq \lambda_4 \land x_{\lambda_4} \in F_1 \cap F_2)$

  $\qty(\lambda_4, F_1 \cap F_2)$は、$\qty{\qty(\lambda_1, F_1), \qty(\lambda_2, F_2)}$の上界であるので、$M$は有向集合である。

  \vskip\baselineskip

  ここで、写像$\varphi \in \Lambda^M$を$\varphi \qty(\lambda, F) \coloneqq \lambda$として定める。

  \mlemref{-1}より$\forall \lambda \in \Lambda \exists F \in \mathcal{F'} \exists \lambda_1 \in \Lambda \qty(\lambda \preccurlyeq \lambda_1 = \varphi(\lambda_1, F) \land \qty(\lambda_1, F) \in M)$である。

  したがって、$\qty(x_{\varphi(\mu)})_{\mu \in M}$は部分ネットである。

  \vskip\baselineskip

  今、\mlemref{-1}より$\forall F \in \mathcal{F'} \exists \lambda_0 \in \Lambda \qty(\qty(\lambda_0, F) \in M)$

  $\forall \qty(\lambda', F') \in M$について、$\qty(\lambda_0, F) \preccurlyeq \qty(\lambda', F')$ならば、$x_{\lambda'} \in F' \subset F$となる。

  よって、$F \in \qty{F \in \P(X) \mid \exists \mu_0 \in M \qty(\qty(x_{\varphi(\mu)})_{\mu \in M_{\succcurlyeq \mu_0}} \subset F)}$
}

\thm{普遍部分ネットの存在}{
  任意のネットは、普遍な部分ネットを持つ。
}{
  ネットに対して\thmref{ネットの定めるフィルター}の定めるフィルター$\mathcal{F}$が存在する。

  \thmref{超フィルターの存在}より$\mathcal{F}$の細分である超フィルター$\mathcal{U}$が存在する。

  \thmref{フィルターの定める部分ネット}より、\thmref{ネットの定めるフィルター}の定めるフィルターが$\mathcal{U}$に一致する部分ネットが存在する。

  \thmref{集合の超フィルター}より、この部分ネットは普遍である。
}

