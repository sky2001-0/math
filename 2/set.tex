\lsection{集合論}

\lsubsection{集合論の述語}

\dfn{集合}{
  集合論では、\num{9}つの公理（
    \axiref{外延性の公理}、\axiref{空集合の公理}、\axiref{対の公理}、\axiref{正則性の公理}、\axiref{無限の公理}、\axiref{和集合の公理}、\axiref{冪集合の公理}、\axiref{置換の公理図式}、\axiref{選択の公理}
  ）が与えられる。

  項を集合と呼ぶ。
}

\dfn{所属}{
  アリティ\num{2}の述語記号$\in$を定める。

  $\in \qty(x, y)$を、簡単のために$x \in y$で表す。
}

\rem{集合は類}{
  集合$y$について、$\in \qty(, y)$はアリティ\num{1}の述語、すなわち類となる。

  ここで、類の$\in$と、所属の$\in$は同一視される。

  一方で、類に対して対応する集合を一般には与えることができない点に注意されたい。
}

\dfn{要素}{
  集合$x, X$について、$x \in X$であるとき、$x$は$X$の要素または元と呼ぶ。
}

\rem{集合系}{
  その要素に要素があることを強調したいとき、この集合を集合系と呼ぶ。
}

\dfn{包含}{
  集合$X, Y$について、アリティ\num{2}の述語記号$\subset$を以下で定める。
  \eq*{
    \subset \qty(X, Y) \defiff \forall x \qty(x \in X \rightarrow x \in Y)
  }

  $\subset \qty(X, Y)$を、簡単のために$X \subset Y$で表す。
}

\dfn{真包含}{
  集合$X, Y$について、アリティ\num{2}の述語記号$\subsetneq$を以下で定める。
  \eq*{
    \subsetneq \qty(X, Y) \defiff X \subset Y \land X \neq Y
  }

  $\subsetneq \qty(X, Y)$を、簡単のために$X \subsetneq Y$で表す。
}

\dfn{左包含}{
  集合$X, Y$について、アリティ\num{2}の述語記号$\supset$を以下で定める。
  \eq*{
    \supset \qty(X, Y) \defiff Y \subset X
  }

  $\supset \qty(X, Y)$を、簡単のために$X \supset Y$で表す。
}

\dfn{左真包含}{
  集合$X, Y$について、アリティ\num{2}の述語記号$\supsetneq$を以下で定める。
  \eq*{
    \supsetneq \qty(X, Y) \defiff Y \subsetneq X
  }

  $\supsetneq \qty(X, Y)$を、簡単のために$X \supsetneq Y$で表す。
}


\lsubsection{集合の構成}

\axi{外延性の公理}{
  \eq*{
    \forall X \forall Y \qty(\forall x \qty(x \in X \leftrightarrow x \in Y) \rightarrow X = Y)
  }
}

\cor{相等の定義}{
  以下が成り立つ。
  \eq*{
    \forall X \forall Y \qty(X = Y \leftrightarrow \forall x \qty(x \in X \leftrightarrow x \in Y))
  }
}

\cor{包含の半順序性}{
  以下が成り立つ。
  \eqg*{
    \forall X \qty(X \subset X) \\*
    \forall X \forall Y \qty(X \subset Y \land Y \subset X \rightarrow X = Y) \\*
    \forall X \forall Y \forall Z \qty(X \subset Y \land Y \subset Z \rightarrow X \subset Z)
  }
}

\rem{集合の外延的定義}{
  \axiref{外延性の公理}より、全ての要素を書き下せば集合は一意に定まる。
  このような全ての要素を書き下す集合の定義方法を、外延的定義と呼ぶ。

  例えば、要素が$x, y, z$であり、かつ、それのみである集合$X$に対して以下のような定義をする。
  \eq*{
    X = \qty{x, y, z}
  }
}

\axi{空集合の公理}{
  \eq*{
    \exists A \forall x \qty(x \notin A)
  }
}

\dfn{空集合}{
  \axiref{外延性の公理}から、\axiref{空集合の公理}が主張する集合が一意に定まる。
  この集合を空集合と呼び、$\varnothing$で表す。

  外延的に$\qty{}$とも表す。
}

\cor*{
  \eq*{
    \forall X \qty(\varnothing \subset X)
  }
}

\axi{対の公理}{
  \eq*{
    \forall x \forall y \exists A \forall t \qty(t \in A \leftrightarrow t = x \lor t = y)
  }
}

\dfn{単集合}{
  $x = y$を考えることで、集合$\qty{x, x}$が存在する。
  この集合は、\axiref{外延性の公理}から、$\qty{x}$とも表せる。

  このような単一の元からなる集合を単集合（singleton）と呼ぶ。
}

\axi{正則性の公理}{
  \eq*{
    \forall X \qty(X \neq \varnothing \rightarrow \exists x \qty(x \in X \land \forall y \qty(y \in X \rightarrow y \notin x)))
  }
}

\lem*{
  \eq*{
    \forall x \forall y \qty(x \notin y \lor y \notin x)
  }
}{
  \axiref{対の公理}より、$\qty{x, y}$が存在する。

  \axiref{正則性の公理}より、
  \eq*{
    \exists z \qty(z \in \qty{x, y} \land \forall t \qty(t \in \qty{x, y} \land t \notin z))
  }

  よって、
  \eq*{
    \forall t \qty(t \in \qty{x, y} \land t \notin x) \lor \forall t \qty(t \in \qty{x, y} \land t \notin y)
  }

  ゆえに、
  \eq*{
    \qty(x \notin x \land y \notin x) \lor \qty(x \notin y \land y \notin y)
  }

  したがって、
  \eq*{
    y \notin x \lor x \notin y
  }
}

\cor*{
  \eq*{
    \forall x \qty(x \notin x)
  }
}

\axi{選択の公理}{
  \eq*{
    \forall X \qty(\varnothing \notin X \land \forall x \forall y \qty(x \in X \land y \in X \land x \neq y \rightarrow x \cap y = \varnothing) \rightarrow \exists A \forall x \qty(x \in X \rightarrow \exists t \qty(x \cap A = \qty{t})))
  }
}


\lsubsection{集合の和と冪}

\axi{和集合の公理}{
  \eq*{
    \forall X \exists A \forall t \qty(t \in A \leftrightarrow \exists B \qty(t \in B \land B \in X))
  }
}

\dfn{和集合}{
  集合系$X$について、\axiref{和集合の公理}の主張する集合$A$が存在して、これは\axiref{外延性の公理}から一意に定まる。
  このような集合$A$を、$X$の和集合と呼び、$\bigcup X$で表す。

  和集合$\bigcup \qty{x, y}$を、簡単のために$x \cup y$とも表す。
}

\cor*{
  \eq*{
    \forall X \forall x \qty(x \in X \rightarrow x \subset \bigcup X)
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(X \subset Y \rightarrow \bigcup X \subset \bigcup Y)
  }
}

\cor*{
  \eq*{
    \forall x \forall y \forall z \qty(x \subset y \rightarrow x \cup z \subset y \cup z)
  }
}

\cor*{
  \eq*{
    \bigcup \varnothing = \varnothing
  }
}

\cor*{
  \eq*{
    \forall x \qty(\bigcup \qty{x} = x)
  }
}

\axi{冪集合の公理}{
  \eq*{
    \forall X \exists A \forall t \qty(t \in A \leftrightarrow t \subset X)
  }
}

\dfn{冪集合}{
  集合$X$について、\axiref{冪集合の公理}の主張する集合$A$が存在して、これは\axiref{外延性の公理}から一意に定まる。
  このような集合$A$を、冪集合と呼び、$\P(X)$で表す。
}

\rem{包含される量化子についての略記}{
  略記$\forall \subset, \exists \subset$を以下で定める。
  \eqa*{
    \forall x \subset X \qty(p(x)) &\defiff \forall x \in \P(X) \qty(p(x)) \\*
    \exists x \subset X \qty(p(x)) &\defiff \exists x \in \P(X) \qty(p(x))
  }
}

\cor*{
  \eq*{
    \forall X \qty(\varnothing \in \P(X) \land X \in \P(X))
  }
}

\cor*{
  \eq*{
    \forall X \qty(\P(X) \notin X)
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(X \subset Y \rightarrow \P(X) \subset \P(Y))
  }
}

\cor*{
  \eq*{
    \P(\varnothing) = \qty{\varnothing}
  }
}

\cor*{
  \eq*{
    \forall x \qty(\P(\qty{x}) = \qty{\varnothing, \qty{x}})
  }
}

\cor*{
  \eq*{
    \forall X \qty(\bigcup \P(X) = X)
  }
}

\dfn{被覆}{
  集合$A$について、以下を満たす集合$X$を$A$の被覆と呼ぶ。
  \eq*{
    X \subset \P(A) \land A = \bigcup X
  }
}


\lsubsection{集合の置換}

\axi{置換の公理図式}{
  アリティ\num{2}の述語記号$\psi$をパラメータとする以下の公理図式を考える。
  \eq*{
    \forall x \forall y \forall z \qty(\psi(x, y) \land \psi(x, z) \rightarrow y = z) \rightarrow \forall X \exists A \forall t \qty(t \in A \leftrightarrow \exists x \qty(x \in X \land \psi(x, t)))
  }
}

\rem{集合の内包的定義１}{
  \axiref{外延性の公理}より、\axiref{置換の公理図式}より主張される集合$A$は一意に定まる。
  \axiref{置換の公理図式}に基づく定義方法を、内包的定義と呼び、\axiref{置換の公理図式}の前件を満たすアリティ\num{2}の述語記号$\psi$について、以下で表す。
  \eq*{
    A = \qty{y \mid \exists x \in X \qty(\psi(x, y))}
  }
}

\thm{分出の公理図式}{
  アリティ\num{1}の述語記号$\psi$について、以下が成り立つ。
  \eq*{
    \forall X \exists A \forall t \qty(t \in A \leftrightarrow t \in X \land \psi(t))
  }
}{
  アリティ\num{1}の述語記号$P$を考える。
  排中律より、
  \eq*{
    \forall X \qty(\exists a \qty(a \in X \land P(a)) \lor \forall a \lnot \qty(a \in X \land P(a)))
  }

  $\forall a \lnot \qty(a \in X \land P(a))$のとき、$A = \varnothing$で示される。

  \vskip\baselineskip

  $\exists a \qty(a \in X \land P(a))$のとき、以下のようなアリティ\num{2}の述語記号$\psi$を考える。
  \eq*{
    \psi(x, y) \defiff \qty(P(x) \land y = x) \lor \qty(\lnot P(x) \land y = a)
  }

  \axiref{置換の公理図式}より、
  \eq*{
    \exists A \forall y \qty(y \in A \leftrightarrow \exists x \qty(x \in X \land \qty(\qty(P(x) \land y = x) \lor \qty(\lnot P(x) \land y = a))))
  }

  すなわち、
  \eq*{
    \exists A \forall t \qty(t \in A \leftrightarrow \exists x \qty(\qty(x \in X \land P(x) \land t = x) \lor \qty(x \in X \land \lnot P(x) \land t = a)))
  }

  $\exists$を除去して、
  \eq*{
    \exists A \forall t \qty(t \in A \leftrightarrow \qty(t \in X \land P(t)) \lor t = a)
  }

  $t = a \rightarrow \qty(a \in X \land P(a))$より、
  \eq*{
    \exists A \forall t \qty(t \in A \leftrightarrow t \in X \land P(t))
  }
}

\rem{集合の内包的定義２}{
  \axiref{外延性の公理}より、\thmref{分出の公理図式}より主張される集合$A$は一意に定まる。
  \thmref{分出の公理図式}に基づく定義方法も、内包的定義と呼び、以下で表す。
  \eq*{
    A = \qty{t \mid t \in X \land \psi(t)}
  }

  簡単のために、以下でも表す。
  \eq*{
    A = \qty{t \in X \mid \psi(t)}
  }
}

\dfn{共通集合}{
  集合系$X$について、以下で定める集合を、$X$の共通集合と呼び、$\bigcap X$で表す。
  \eq*{
    \bigcap X \coloneqq \qty{x \mid x \in \bigcup X \land \forall Y \qty(Y \in X \rightarrow x \in Y)}
  }

  共通集合$\bigcap \qty{x, y}$を、簡単のために$x \cap y$とも表す。
}

\rem{共通集合の定義について}{
  本ノートにおける共通集合の定義は、$\bigcap \varnothing$の取り扱いにおいて一般的ではないことに注意されたい。
}

\cor*{
  \eq*{
    \bigcap \varnothing = \varnothing
  }
}

\cor*{
  \eq*{
    \forall x \forall X \qty(x \in X \rightarrow \bigcap X \subset x)
  }
}

\cor*{
  \eq*{
    \forall x \forall y \forall z \qty(x \subset y \rightarrow x \cap z \subset y \cap z)
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(X \neq \varnothing \land X \subset Y \rightarrow \bigcap Y \subset \bigcap X)
  }
}

\cor*{
  \eq*{
    \forall x \qty(\bigcap \qty{x} = x)
  }
}

\cor{吸収法則}{
  \eqg*{
    \forall x \forall y \qty(x \cup \qty(x \cap y) = x) \\*
    \forall x \forall y \qty(x \cap \qty(x \cup y) = x)
  }
}

\cor{分配法則}{
  \eqg*{
    \forall x \forall y \forall z \qty(x \cup \qty(y \cap z) = \qty(x \cup y) \cap \qty(x \cup z)) \\*
    \forall x \forall y \forall z \qty(x \cap \qty(y \cup z) = \qty(x \cap y) \cup \qty(x \cap z))
  }
}

\cor*{
  \eq*{
    \forall X \qty(\bigcap X \subset \bigcup X)
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(\P(X) \cap \P(Y) = \P(X \cap Y))
  }
}

\dfn{分割}{
  集合$A$について、以下を満たす$A$の被覆$X$を$A$の分割と呼ぶ。
  \eq*{
    \forall x, y \in X \qty(x \neq y \rightarrow x \cap y = \varnothing)
  }

  明示的に以下で表す。
  \eq*{
    A = \bigsqcup X
  }
}

\dfn{差集合}{
  集合$X, Y$について、以下で定める集合を、$X$と$Y$の差集合と呼び、$X \setminus Y$で表す。
  \eq*{
    X \setminus Y \coloneqq \qty{x \mid x \in X \land x \notin Y}
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(X \setminus Y \subset X)
  }
}

\cor*{
  \eqg*{
    \forall X \qty(X \setminus X  = \varnothing) \\*
    \forall X \qty(X \setminus \varnothing = X) \\*
    \forall X \qty(\varnothing \setminus X = \varnothing)
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \forall Z \qty(X \setminus \qty(Y \setminus Z) = \qty(X \setminus Y) \cup \qty(X \cap Z))
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \forall Z \qty(Y \subset Z \rightarrow X \setminus Z \subset X \setminus Y)
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(X \subset Y \leftrightarrow X \setminus Y = \varnothing)
  }
}

\thm{De Morganの法則}{
  集合$X$と空でない集合系$A$について、以下が成り立つ。
  \eqg*{
    X \setminus \bigcup A = \bigcap \qty{X \setminus Y \mid Y \in A} \\*
    X \setminus \bigcap A = \bigcup \qty{X \setminus Y \mid Y \in A}
  }
}{
  第一の定理を示す。
  \eqa*{
    x \in X \setminus \bigcup A
    &\leftrightarrow x \in X \land x \notin \bigcup A \\*
    &\leftrightarrow x \in X \land \forall Y \qty(Y \in A \rightarrow x \notin Y)
    \leftrightarrow x \in X \land \forall Y \qty(Y \in A \rightarrow x \notin X \setminus Y)
  }

  $A \neq \varnothing$より、
  \eq*{
    \leftrightarrow x \in X \land x \in \bigcap \qty{X \setminus Y \mid Y \in A} \leftrightarrow x \in \bigcap \qty{X \setminus Y \mid Y \in A}
  }

  \vskip\baselineskip

  第二の定理を示す。
  \eqa*{
    x \in X \setminus \bigcap A &\leftrightarrow x \in X \land x \notin \bigcap A
    \leftrightarrow x \in X \land \qty(x \notin \bigcup A \lor \exists Y \qty(Y \in A \land x \notin Y)) \\*
    &\leftrightarrow x \in X \setminus \bigcup A \lor \exists Y \qty(Y \in A \land x \in X \setminus Y) \\*
    &\leftrightarrow x \in X \setminus \bigcup A \lor x \in \bigcup \qty{X \setminus Y \mid Y \in A} \\*
    &\leftrightarrow x \in \bigcap \qty{X \setminus Y \mid Y \in A} \lor x \in \bigcup \qty{X \setminus Y \mid Y \in A} \\*
    &\leftrightarrow x \in \bigcup \qty{X \setminus Y \mid Y \in A}
  }

  最後から\num{2}行目への変形には、第一の定理を用いた。
}


\lsubsection{順序対と集合の直積}

\dfn{順序対}{
  \axiref{対の公理}から、$\qty{\qty{x}, \qty{x, y}}$が存在する。
  このような集合を、順序対と呼び、$\qty(x, y)$で表す。
}

\cor{順序対の相等}{
  \eq*{
    \forall x_1 \forall x_2 \forall y_1 \forall y_2 \qty(\qty(x_1, x_2) = \qty(y_1, y_2) \leftrightarrow x_1 = y_1 \land x_2 = y_2)
  }
}

\cor{順序対の順序性}{
  \eq*{
    \forall x \forall y \qty(x \neq y \rightarrow \qty(x, y) \neq \qty(y, x))
  }
}

\cor{順序対の取り出し}{
  \eqg*{
    \forall x \forall y \qty(x = \bigcup \bigcap \qty(x, y)) \\*
    \forall x \forall y \qty(y = \bigcup \bigcap \qty(x, y) \land \qty(\bigcap \qty(x, y) = \bigcap \qty(x, y))) \lor \qty(y = \bigcup \qty(\bigcup \qty(x, y) \setminus \bigcap \qty(x, y)) \land \qty(\bigcap \qty(x, y) \neq \bigcap \qty(x, y)))
  }
}

\lem*{
  \eq*{
    \forall X \forall Y \forall x \forall y \qty(x \in X \land y \in Y \rightarrow \qty(x, y) \in \P(\P(X \cup Y)))
  }
}{
  \eqg*{
    x \in X \land y \in Y \\*
    \qty{x} \in \P(X \cup Y) \land \qty{x, y} \in \P(X \cup Y) \\*
    \qty(x, y) \in \P(\P(X \cup Y))
  }
}

\dfn{直積集合}{
  集合$X, Y$について、以下を満たす集合を$X$と$Y$の直積集合と呼び、$X \times Y$で表す。
  \eq*{
    X \times Y \coloneqq \qty{z \in \P(\P(X \cup Y)) \mid \exists x \exists y \qty(x \in X \land y \in Y \land z = \qty(x, y))}
  }
}

\cor*{
  \eq*{
    \forall X \qty(X \times \varnothing = \varnothing \times X = \varnothing)
  }
}

\cor*{
  \eqg*{
    \forall X_1, X_2, Y \qty(\qty(X_1 \cup X_2) \times Y = \qty(X_1 \times Y) \cup \qty(X_2 \times Y)) \\*
    \forall X_1, X_2, Y_1, Y_2 \qty(\qty(X_1 \cap X_2) \times \qty(Y_1 \cap Y_2) = \qty(X_1 \times Y_1) \cap \qty(X_2 \times Y_2)) \\*
    \forall X_1, X_2, Y \qty(\qty(X_1 \setminus X_2) \times Y = \qty(X_1 \times Y) \setminus \qty(X_2 \times Y))
  }
}


\lsubsection{無限系譜}

\axi{無限の公理}{
  \eq*{
    \exists A \qty(\varnothing \in A \land \forall x \qty(x \in A \rightarrow x \cup \qty{x} \in A))
  }
}

\dfn{無限系譜}{
  集合$X$が無限系譜であるとは、以下を満たすことである。
  \eq*{
    \varnothing \in X \land \forall x \qty(x \in X \rightarrow x \cup \qty{x} \in X)
  }

  \axiref{無限の公理}より無限系譜は存在する。
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(\text{$X$は無限系譜である} \land \text{$Y$は無限系譜である} \rightarrow \text{$X \cap Y$は無限系譜である})
  }
}

\lem*{
  以下が成り立つ。
  \eq*{
    \forall A \qty(A \neq \varnothing \land \forall X \in A \qty(\text{$X$は無限系譜である}) \rightarrow \text{$\bigcap A$は無限系譜である})
  }
}{
  空でない$A$を考える。

  $\forall X \in A \qty(\varnothing \in X)$であるので、$\varnothing \in \bigcap A$である。

  $\forall x \in \bigcap A$について、$\forall X \in A \qty(x \in X)$であり、無限系譜であることから$x \cup \qty{x} \in X$である。

  ゆえに、$x \cup \qty{x} \in \bigcap A$である。

  よって、$\bigcap A$は無限系譜である。
}

\lem*{
  無限系譜$X$について、以下で定める集合は無限系譜である。
  \eq*{
    \bigcap \qty{Y \subset X \mid \text{$Y$は無限系譜である}}
  }
}{
  $A \coloneqq \qty{Y \subset X \mid \text{$Y$は無限系譜である}}$とすると、
  $X \in A$より、$A \neq \varnothing$である。

  \mlemref{-1}より成り立つ。
}

\lem{最小無限系譜の一意性}{
  \mlemref{-1}で定める集合は、無限系譜$X$の取り方によらずに一意に定まる。
}{
  $\omega(X) \coloneqq \bigcap \qty{Y \subset X \mid \text{$Y$は無限系譜である}}$とする。

  $X_1, X_2$の\num{2}つの無限系譜を考える。

  \mlemref{-2}より$X_1 \cap X_2$も無限系譜であり、定義より$\omega(X_2) \subset X_1 \cap X_2 \subset X_1$である。

  定義より、$\omega(X_1) \subset \omega(X_2)$である。

  同様に$\omega(X_1) \supset \omega(X_2)$であるため、示される。
}
