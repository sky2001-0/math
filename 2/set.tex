\lsection{集合}

\dfn{集合}{
  述語記号$\in$を定める。

  略記$\notin$を以下で定める。
  \eq*{
    x \notin X \defiff \lnot \qty(x \in X)
  }

  略記$\forall \in, \exists \in$を以下で定める。
  \eqa*{
    \forall x \in X \qty(p(x)) &\defiff \forall x \qty(x \in X \rightarrow p(x)) \\*
    \exists x \in X \qty(p(x)) &\defiff \exists x \qty(x \in X \land p(x))
  }

  $\in$に関わる、全ての公理を満たす変項を集合（set、集まりcollectionとは区別される）と呼ぶ。
}

\dfn{要素}{
  集合$x, X$について、$x \in X$であるとき、$x$は$X$の要素または元と呼ぶ。
}

\dfn{集合系}{
  集合を要素としている集合であることを強調したいとき、この集合を集合系と呼ぶ。
}

\dfn{包含}{
  集合$X, Y$が以下を満たすとき、$X$は$Y$の部分集合であると呼び、$X \subset Y$と表す。
  \eq*{
    \forall X \forall Y \qty(X \subset Y \defiff \forall x \qty(x \in X \rightarrow x \in Y))
  }

  略記$\supset, \subsetneq, \supsetneq$を以下で定める。
  \eqg*{
    \forall X \forall Y \qty(X \subsetneq Y \defiff X \subset Y \land X \neq Y) \\*
    \forall X \forall Y \qty(X \supset Y \defiff Y \subset X) \\*
    \forall X \forall Y \qty(X \supsetneq Y \defiff Y \subsetneq X)
  }
}


\lsubsection{集合の構成}

\axi{外延性の公理}{
  \eq*{
    \forall X \forall Y \qty(\forall x \qty(x \in X \leftrightarrow x \in Y) \rightarrow X = Y)
  }
}

\cor{相等の定義}{
  以下が成り立つ。
  \eq*{
    \forall X \forall Y \qty(X = Y \leftrightarrow \forall x \qty(x \in X \leftrightarrow x \in Y))
  }
}

\cor{包含の半順序性}{
  以下が成り立つ。
  \eqg*{
    \forall X \qty(X \subset X) \\*
    \forall X \forall Y \qty(X \subset Y \land Y \subset X \rightarrow X = Y) \\*
    \forall X \forall Y \forall Z \qty(X \subset Y \land Y \subset Z \rightarrow X \subset Z)
  }
}

\rem{集合の外延的定義}{
  \axiref{外延性の公理}より、全ての要素を書き下せば集合は一意に定まる。
  このような全ての要素を書き下す集合の定義方法を、外延的定義と呼ぶ。

  例えば、要素が$x, y, z$であり、かつ、それのみである集合$X$に対して以下のような定義をする。
  \eq*{
    X = \qty{x, y, z}
  }
}

\axi{空集合の公理}{
  \eq*{
    \exists A \forall x \qty(x \notin A)
  }
}

\dfn{空集合}{
  \axiref{外延性の公理}から、\axiref{空集合の公理}が主張する集合が一意に定まる。
  この集合を空集合と呼び、$\varnothing$で表す。

  外延的に$\qty{}$とも表す。
}

\cor*{
  \eq*{
    \forall X \qty(\varnothing \subset X)
  }
}

\axi{対の公理}{
  \eq*{
    \forall x \forall y \exists A \forall t \qty(t \in A \leftrightarrow t = x \lor t = y)
  }
}

\dfn{単集合}{
  $x = y$を考えることで、集合$\qty{x, x}$が存在する。
  この集合は、\axiref{外延性の公理}から、$\qty{x}$とも表せる。

  このような単一の元からなる集合を単集合（singleton）と呼ぶ。
}

\axi{正則性の公理}{
  \eq*{
    \forall X \qty(X \neq \varnothing \rightarrow \exists x \qty(x \in X \land \forall t \qty(t \in X \rightarrow t \notin x)))
  }
}

\lem*{
  \eq*{
    \forall x \forall y \lnot \qty(x \in y \land y \in x)
  }
}{
  \axiref{対の公理}より、$\qty{x, y}$が存在する。

  \axiref{正則性の公理}より、
  \eq*{
    \exists z \qty(z \in \qty{x, y} \land \forall t \qty(t \in \qty{x, y} \land t \notin z))
  }

  よって、
  \eq*{
    \forall t \qty(t \in \qty{x, y} \land t \notin x) \lor \forall t \qty(t \in \qty{x, y} \land t \notin y)
  }

  ゆえに、
  \eq*{
    \qty(x \notin x \land y \notin x) \lor \qty(x \notin y \land y \notin y)
  }

  したがって、
  \eq*{
    y \notin x \lor x \notin y
  }
}

\cor*{
  \eq*{
    \forall x \qty(x \notin x)
  }
}


\lsubsection{集合の和と冪}

\axi{和集合の公理}{
  \eq*{
    \forall X \exists A \forall t \qty(t \in A \leftrightarrow \exists Y \qty(t \in Y \land Y \in X))
  }
}

\dfn{和集合}{
  集合系$X$について、\axiref{和集合の公理}の主張する集合$A$が存在して、これは\axiref{外延性の公理}から一意に定まる。
  このような集合$A$を、$X$の和集合と呼び、$\bigcup X$で表す。

  和集合$\bigcup \qty{x, y}$を、簡単のために$x \cup y$とも表す。
}

\cor*{
  \eq*{
    \forall X \forall x \qty(x \in X \rightarrow x \subset \bigcup X)
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(X \subset Y \rightarrow \bigcup X \subset \bigcup Y)
  }
}

\cor*{
  \eq*{
    \forall x \forall y \forall z \qty(x \subset y \rightarrow x \cup z \subset y \cup z)
  }
}

\cor*{
  \eq*{
    \bigcup \varnothing = \varnothing
  }
}

\cor*{
  \eq*{
    \forall x \qty(\bigcup \qty{x} = x)
  }
}

\axi{冪集合の公理}{
  \eq*{
    \forall X \exists A \forall t \qty(t \in A \leftrightarrow t \subset X)
  }
}

\dfn{冪集合}{
  集合$X$について、\axiref{冪集合の公理}の主張する集合$A$が存在して、これは\axiref{外延性の公理}から一意に定まる。
  このような集合$A$を、冪集合と呼び、$\P(X)$で表す。
}

\rem{冪の要素と部分}{
  $\forall x \in \P(X)$や$\exists x \in \P(X)$を、簡単のために、$\forall x \subset X$や$\exists x \subset X$とも表す。
}

\cor*{
  \eq*{
    \forall X \qty(\varnothing \in \P(X) \land X \in \P(X))
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(X \subset Y \rightarrow \P(X) \subset \P(Y))
  }
}

\cor*{
  \eq*{
    \P(\varnothing) = \qty{\varnothing}
  }
}

\cor*{
  \eq*{
    \forall x \qty(\P(\qty{x}) = \qty{\varnothing, \qty{x}})
  }
}

\cor*{
  \eq*{
    \forall X \qty(\bigcup \P(X) = X)
  }
}

\dfn{被覆}{
  集合$A$について、以下を満たす集合$X$を$A$の被覆と呼ぶ。
  \eq*{
    X \subset \P(A) \land A = \bigcup X
  }
}


\lsubsection{集合の共通と差}

\axi{置換の公理図式}{
  アリティ\num{2}の述語記号$\psi$をパラメータとする以下の公理図式を考える。
  \eq*{
    \forall x \forall y \forall z \qty(\psi(x, y) \land \psi(x, z) \rightarrow y = z) \rightarrow \forall X \exists A \forall y \qty(y \in A \leftrightarrow \exists x \qty(x \in X \land \psi(x, y)))
  }
}

\rem{集合の内包的定義１}{
  \axiref{外延性の公理}より、\axiref{置換の公理図式}より主張される集合$A$は一意に定まる。
  \axiref{置換の公理図式}に基づく定義方法を、内包的定義と呼び、\axiref{置換の公理図式}の前件を満たすアリティ\num{2}の述語記号$\psi$について、以下で表す。
  \eq*{
    A = \qty{y \mid \exists x \in X \qty(\psi(x, y))}
  }
}

\thm{分出の公理図式}{
  アリティ\num{1}の述語記号$\psi$について、以下が成り立つ。
  \eq*{
    \forall X \exists A \forall t \qty(t \in A \leftrightarrow t \in X \land \psi(t))
  }
}{
  アリティ\num{1}の述語記号$P$を考える。
  排中律より、
  \eq*{
    \forall X \qty(\exists a \qty(a \in X \land P(a)) \lor \forall a \lnot \qty(a \in X \land P(a)))
  }

  $\forall a \lnot \qty(a \in X \land P(a))$のとき、$A = \varnothing$で示される。

  \vskip\baselineskip

  $\exists a \qty(a \in X \land P(a))$のとき、以下のようなアリティ\num{2}の述語記号$\psi$を考える。
  \eq*{
    \psi(x, y) \defiff \qty(P(x) \land y = x) \lor \qty(\lnot P(x) \land y = a)
  }

  \axiref{置換の公理図式}より、
  \eq*{
    \exists A \forall y \qty(y \in A \leftrightarrow \exists x \qty(x \in X \land \qty(\qty(P(x) \land y = x) \lor \qty(\lnot P(x) \land y = a))))
  }

  すなわち、
  \eq*{
    \exists A \forall t \qty(t \in A \leftrightarrow \exists x \qty(\qty(x \in X \land P(x) \land t = x) \lor \qty(x \in X \land \lnot P(x) \land t = a)))
  }

  $\exists$を除去して、
  \eq*{
    \exists A \forall t \qty(t \in A \leftrightarrow \qty(t \in X \land P(t)) \lor t = a)
  }

  $t = a \rightarrow \qty(a \in X \land P(a))$より、
  \eq*{
    \exists A \forall t \qty(t \in A \leftrightarrow t \in X \land P(t))
  }
}

\rem{集合の内包的定義２}{
  \axiref{外延性の公理}より、\thmref{分出の公理図式}より主張される集合$A$は一意に定まる。
  \thmref{分出の公理図式}に基づく定義方法も、内包的定義と呼び、以下で表す。
  \eq*{
    A = \qty{t \mid t \in X \land \psi(t)}
  }

  簡単のために、以下でも表す。
  \eq*{
    A = \qty{t \in X \mid \psi(t)}
  }
}

\dfn{共通集合}{
  集合系$X$について、以下で定める集合を、$X$の共通集合と呼び、$\bigcap X$で表す。
  \eq*{
    \bigcap X \coloneqq \qty{x \mid x \in \bigcup X \land \forall Y \qty(Y \in X \rightarrow x \in Y)}
  }

  共通集合$\bigcap \qty{x, y}$を、簡単のために$x \cap y$とも表す。
}

\rem{共通集合の定義について}{
  本ノートにおける共通集合の定義は、$\bigcap \varnothing$の取り扱いにおいて一般的ではないことに注意されたい。
}

\thm{共通集合}{
  \eqg*{
    \bigcap \varnothing = \varnothing \\*
    X \neq \varnothing \rightarrow \bigcap X = \qty{x \mid \forall Y \qty(Y \in X \rightarrow x \in Y)}
  }
}{
  第一式は、定義より自明。

  第二式について考える。
  以下が成り立つ。
  \eqg*{
    \forall X \forall x \forall Y \qty(Y \in X \rightarrow x \in Y) \\*
    \forall X \forall x \qty(X = \varnothing \lor \exists Y \qty(Y \in X \land x \in Y)) \\*
    \forall X \forall x \qty(X = \varnothing \lor x \in \bigcup X)
  }
}

\cor*{
  \eq*{
    \forall x \forall X \qty(x \in X \rightarrow \bigcap X \subset x)
  }
}

\cor*{
  \eq*{
    \forall x \forall y \forall z \qty(x \subset y \rightarrow x \cap z \subset y \cap z)
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(X \neq \varnothing \land X \subset Y \rightarrow \bigcap Y \subset \bigcap X)
  }
}

\cor*{
  \eq*{
    \forall x \qty(\bigcap \qty{x} = x)
  }
}

\cor{吸収法則}{
  \eqg*{
    \forall x \forall y \qty(x \cup \qty(x \cap y) = x) \\*
    \forall x \forall y \qty(x \cap \qty(x \cup y) = x)
  }
}

\cor{分配法則}{
  \eqg*{
    \forall x \forall y \forall z \qty(x \cup \qty(y \cap z) = \qty(x \cup y) \cap \qty(x \cup z)) \\*
    \forall x \forall y \forall z \qty(x \cap \qty(y \cup z) = \qty(x \cap y) \cup \qty(x \cap z))
  }
}

\cor*{
  \eq*{
    \forall X \qty(\bigcap X \subset \bigcup X)
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(\P(X) \cap \P(Y) = \P(X \cap Y))
  }
}

\dfn{分割}{
  集合$A$について、以下を満たす$A$の被覆$X$を$A$の分割と呼ぶ。
  \eq*{
    \forall x, y \in X \qty(x \neq y \rightarrow x \cap y = \varnothing)
  }

  明示的に以下で表す。
  \eq*{
    A = \bigsqcup X
  }
}

\dfn{差集合}{
  集合$X, Y$について、以下で定める集合を、$X$と$Y$の差集合と呼び、$X \setminus Y$で表す。
  \eq*{
    X \setminus Y \coloneqq \qty{x \mid x \in X \land x \notin Y}
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(X \setminus Y \subset X)
  }
}

\cor*{
  \eqg*{
    \forall X \qty(X \setminus X  = \varnothing) \\*
    \forall X \qty(X \setminus \varnothing = X) \\*
    \forall X \qty(\varnothing \setminus X = \varnothing)
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \forall Z \qty(X \setminus \qty(Y \setminus Z) = \qty(X \setminus Y) \cup \qty(X \cap Z))
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \forall Z \qty(Y \subset Z \rightarrow X \setminus Z \subset X \setminus Y)
  }
}

\cor*{
  \eq*{
    \forall X \forall Y \qty(X \subset Y \leftrightarrow X \setminus Y = \varnothing)
  }
}

\thm{De Morganの法則}{
  集合$X$と空でない集合系$A$について、以下が成り立つ。
  \eqg*{
    X \setminus \bigcup A = \bigcap \qty{X \setminus Y \mid Y \in A} \\*
    X \setminus \bigcap A = \bigcup \qty{X \setminus Y \mid Y \in A}
  }
}{
  第一の定理を示す。
  \eqa*{
    x \in X \setminus \bigcup A
    &\leftrightarrow x \in X \land x \notin \bigcup A \\*
    &\leftrightarrow x \in X \land \forall Y \qty(Y \in A \rightarrow x \notin Y)
    \leftrightarrow x \in X \land \forall Y \qty(Y \in A \rightarrow x \notin X \setminus Y)
  }

  $A \neq \varnothing$より、
  \eq*{
    \leftrightarrow x \in X \land x \in \bigcap \qty{X \setminus Y \mid Y \in A} \leftrightarrow x \in \bigcap \qty{X \setminus Y \mid Y \in A}
  }

  \vskip\baselineskip

  第二の定理を示す。
  \eqa*{
    x \in X \setminus \bigcap A &\leftrightarrow x \in X \land x \notin \bigcap A
    \leftrightarrow x \in X \land \qty(x \notin \bigcup A \lor \exists Y \qty(Y \in A \land x \notin Y)) \\*
    &\leftrightarrow x \in X \setminus \bigcup A \lor \exists Y \qty(Y \in A \land x \in X \setminus Y) \\*
    &\leftrightarrow x \in X \setminus \bigcup A \lor x \in \bigcup \qty{X \setminus Y \mid Y \in A} \\*
    &\leftrightarrow x \in \bigcup \qty{X \setminus Y \mid Y \in A}
  }

  最後の変形には、第一の定理を用いた。
}


\lsubsection{順序対と集合の直積}

\dfn{順序対}{
  \axiref{対の公理}から、$\qty{\qty{x}, \qty{x, y}}$が存在する。
  このような集合を、順序対と呼び、$\qty(x, y)$で表す。
}

\cor{順序対の相等}{
  \eq*{
    \forall x_1 \forall x_2 \forall y_1 \forall y_2 \qty(\qty(x_1, x_2) = \qty(y_1, y_2) \leftrightarrow x_1 = y_1 \land x_2 = y_2)
  }
}

\cor{順序対の順序性}{
  \eq*{
    \forall x \forall y \qty(x \neq y \rightarrow \qty(x, y) \neq \qty(y, x))
  }
}

\cor{順序対の取り出し}{
  \eqg*{
    \forall x \forall y \qty(x = \bigcup \bigcap \qty(x, y)) \\*
    \forall x \forall y \qty(y = \bigcup \bigcap \qty(x, y) \land \qty(\bigcap \qty(x, y) = \bigcap \qty(x, y))) \lor \qty(y = \bigcup \qty(\bigcup \qty(x, y) \setminus \bigcap \qty(x, y)) \land \qty(\bigcap \qty(x, y) \neq \bigcap \qty(x, y)))
  }
}

\lem*{
  \eq*{
    \forall X \forall Y \forall x \forall y \qty(x \in X \land y \in Y \rightarrow \qty(x, y) \in \P(\P(X \cup Y)))
  }
}{
  \eqg*{
    x \in X \land y \in Y \\*
    \qty{x} \in \P(X \cup Y) \land \qty{x, y} \in \P(X \cup Y) \\*
    \qty(x, y) \in \P(\P(X \cup Y))
  }
}

\dfn{直積集合}{
  集合$X, Y$について、以下を満たす集合を$X$と$Y$の直積集合と呼び、$X \times Y$で表す。
  \eq*{
    X \times Y \coloneqq \qty{z \in \P(\P(X \cup Y)) \mid \exists x \exists y \qty(x \in X \land y \in Y \land z = \qty(x, y))}
  }
}

\cor*{
  \eq*{
    \forall X \qty(X \times \varnothing = \varnothing \times X = \varnothing)
  }
}

\cor*{
  \eqg*{
    \forall X_1, X_2, Y \qty(\qty(X_1 \cup X_2) \times Y = \qty(X_1 \times Y) \cup \qty(X_2 \times Y)) \\*
    \forall X_1, X_2, Y_1, Y_2 \qty(\qty(X_1 \cap X_2) \times \qty(Y_1 \cap Y_2) = \qty(X_1 \times Y_1) \cap \qty(X_2 \times Y_2)) \\*
    \forall X_1, X_2, Y \qty(\qty(X_1 \setminus X_2) \times Y = \qty(X_1 \times Y) \setminus \qty(X_2 \times Y))
  }
}


\lsubsection{関係}

\dfn{関係}{
  集合$X, Y$と、集合系$G \subset X \times Y$について、順序対$\mathfrak{R} \coloneqq \qty(\qty(X, Y), G)$を関係と呼ぶ。

  \vskip\baselineskip

  記号の濫用であるが、$\mathfrak{R}$を以下で定めるアリティ\num{2}の述語記号としても扱う。
  \eq*{
    \mathfrak{R}(x, y) \defiff \qty(x, y) \in G
  }
}

\dfn{左一意的}{
  関係$\mathfrak{R}$が以下を満たすとき、$\mathfrak{R}$は左一意的であると言う。
  \eq*{
    \forall w, x \qty(\exists y \qty(\mathfrak{R}(w, y) \land \mathfrak{R}(x, y)) \rightarrow w = x)
  }
}

\dfn{右一意的}{
  関係$\mathfrak{R}$が以下を満たすとき、$\mathfrak{R}$は右一意的であると言う
  \eq*{
    \forall y, z \qty(\exists x \qty(\mathfrak{R}(x, y) \land \mathfrak{R}(x, z)) \rightarrow y = z)
  }
}

\dfn{一対一}{
  関係$\mathfrak{R}$が左一意的かつ右一意的であるとき、$\mathfrak{R}$は一対一であると言う。
}

\dfn{左全域的}{
  関係$\mathfrak{R} = \qty(\qty(X, Y), G)$が以下を満たすとき、$\mathfrak{R}$は左全域的であると言う。
  \eq*{
    \forall x \in X \exists y \qty(\mathfrak{R}(x, y))
  }
}

\dfn{右全域的}{
  関係$\mathfrak{R} = \qty(\qty(X, Y), G)$が以下を満たすとき、$\mathfrak{R}$は右全域的であると言う。
  \eq*{
    \forall y \in Y \exists x \qty(\mathfrak{R}(x, y))
  }
}
